---
title: "2. 진화적 Architect"
date: 2022-05-15 21:03:28 -0400
categories: msa
tags:
  - msa
  - architecture
comments: true
published: false
---
## 2.1 Architect에 대한 진화적 관점
Architect가 만들어내는 결과물이 특정 시점을 기준으로 고정되는 일은 없다. 처음부터 완벽한 최종 제품을 만들려하기보다는 추가 학습을 통해 적합한 System이 생성되고 지속해서 성장할 수 있는 Framework를 만드는 데 보탬이 되도록 생각을 전환해야 한다.

Architect의 역할은 건축가가 아닌 도시 설계자이므로 '특정 건물을 거기에 만들라'고 하는 대신 **도시를 구역화**한다. 정확히 어떤 빌딩을 세울지는 다른 이들이 결정할 일이지만, 공장은 산업 구역에 세워야 한다는 규제는 존재한다.

또한 도시에서 발생하는 모든 측면을 직접 통제하려는 노력은 헛수고이므로 모든 사태에 대해 미리 계획하기 보다는, 변화를 받아들이도록 해야한다.

결국 사용자와 개발자가 똑같이 행복해지도록 하는 것이다.

## 2.2 구역화
Architect는 service간 통신 방법에 대해 고민하거나 system의 전반적인 상태를 적절히 monitoring 하는데 더 많은 시간을 할애해야 한다는 것을 의미한다.
 service 별로 team들이 서로 다른 기술 stack과 data 저장소를 사용해도 문제없다 할 수 있지만, 여기서 다른 우려 상황이 발생할 수 있다.
  다른 저장소를 사용한다면 그것들을 대규모로 운용하는 데 충분한 경험이 부족하다는 것을 깨닫게 될 것이다. 예를 들어 Netflix는 data 저장 기술을 대부분 Cassandra로 통일했다.
> Cassandra?
> 아파치 카산드라는 자유-오픈 소스 분산형 NoSQL 데이터베이스 관리 시스템의 하나로, 단일 장애점 없이 고성능을 제공하면서 수많은 서버 간의 대용량의 데이터를 관리하기 위해 설계되었다.

비록 모든 경우에 적합한 최선의 대응책은 아닐지라도, 전문지식을 통해 얻는 가치야말로 다수의 이종 platform 확장을 지원하고 운영하는 것보다 더 중요하다고 생각한 것이다.  다소 극단적인 사례지만 이해가 가는 바이다.

 만약 한 service는 HTTP 상에서 REST를 노출하고, 다른 service는 protocol buffer를, 또 다른 service는 java RMI(remote method invocation)을 사용하기로 결정한다면, 호출하는 service가 의사소통을 위해 다양한 style을 이해하고 지원해야 하므로 통합 작업은 악몽이 될 수 있다. 
>Protocol buffer?
>google에서 개발한 구조화된 data를 직렬화하는 방법으로, network 통신과 data 저장에 사용된다.

하여 diagram box 간에 event는 꼭 걱정해야 하고, 내부의 일에서만 자유로워야 한다.

> 코딩하는 architect
> Architect또한 pair programming에 참여하는 것이 단순히 code를 review하는 것 보다 훨씬 효과적!

## 2.3 원칙적인 접근법
> 규칙은 바보에게는 복종이지만 현자에게는 지침이다.
	>  		_더글라스 베이더(Douglas Bader)
### 2.3.1 원칙
Cloud application platform인 Heroku의 12가지 요소(factor)는 Heroku platform 상에서 잘 작동하는 application을 작성하기 위해 정리된 일련의 설계 원칙으로, 다른 맥락에 적용해도 효과적이다.

## 2.4 필수 기준
### 2.4.1 아키텍처 안정성
모든 하위 서비스(downstream service)에 대해 최소한의 connection pool을 관리하게 해야한다.

## 2.5 코드를 통한 통제
### 2.5.1 맞춤형 서비스 템플릿
- 작업 방식을 지시하는 architecture 팀이나 중앙집권적 도구의 업무가 되지 않도록 주의
- 모두가 참여하는 집단 활동이 되어야 함 -> 연대 책임. e.g) 내부 open source
- 재사용 가능한 코드를 만들기 갈망하는 우리는 서비스 간의 결합(coupling)을 일으키는 근원을 유입시킬 수 있음

## 2.6 예외 처리
- 팀의 자율성을 최적화하는 방법으로 MSA를 선호
- 개발자의 작업 방식에 많은 제약을 가하는 조직이 있다면 MSA가 적합하지 않음.
## 2.7 중앙에서의 거버넌스와 지휘
### Architect
- 최신 기술을 유지
- 사람들과 함께 나아가야 함
	- 함께 일하는 동료들이 의사 결정을 이해하고 수행할 수 있도록 참여시킴
## 2.8 팀 만들기
개별 서비스의 소유권을 부여함으로써 그들을 성장시키는 것은 그들 자신의 경력 목표를 성취하도록 돕는 훌륭한 방법일 뿐만 아니라 다른 담당자들의 짐도 덜어준다.

> 출처
> - Build Microservices - 샘 뉴먼 저
